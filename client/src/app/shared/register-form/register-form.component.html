<h2 class="text-center text-primary"> Sign up </h2>
<hr>

<form [formGroup]="registerForm" (ngSubmit)="register()">

  <div class="mb-3">
    <label style="margin-right: 10px;"> I am a: </label>
    <label class="form-check-label">
      <input type="radio"
        class="form-check-input" value="male" formControlName="gender"
      > Male
    </label>
    <label class="form-check-label">
      <input type="radio"
        class="form-check-input ms-3" value="female" formControlName="gender"
      > Female
    </label>
  </div>

  <!--SE USA UN COMPONENTE PERSONALIZADO PARA QUE EL FORMULARIO QUEDE MÁS LIMPIO Y LOS ERRORES SE COMPRUEBEN MÁS FÁCIL-->

  <app-text-input [formControl]="$any(registerForm.controls['username'])" [label]="'Username'" [type]="'text'"
  ></app-text-input>

  <app-text-input [formControl]="$any(registerForm.controls['knownAs'])" [label]="'Known As'" [type]="'text'"
  ></app-text-input>

  <app-date-picker [formControl]="$any(registerForm.controls['dateOfBirth'])" [label]="'Date of Birth'" [maxDate]="maxDate"
  ></app-date-picker>

  <app-text-input [formControl]="$any(registerForm.controls['city'])" [label]="'City'" [type]="'text'"
  ></app-text-input>

  <app-text-input [formControl]="$any(registerForm.controls['country'])" [label]="'Country'" [type]="'text'"
  ></app-text-input>

  <app-text-input [formControl]="$any(registerForm.controls['password'])" [label]="'Password'" [type]="'password'"
  ></app-text-input>

  <app-text-input [formControl]="$any(registerForm.controls['confirmPassword'])" [label]="'Confirm Password'" [type]="'password'"
  ></app-text-input>
  <!-- <div class="mb-3">
    <input type="text"
      class="form-control"
      placeholder="Username"
      formControlName="username"
      [class.is-invalid]="isValidField('username')"
    >
    <div class="invalid-feedback">Please enter a username</div>

  </div>
  <div class="mb-3">
    <input type="password"
      class="form-control"
      placeholder="Password"
      formControlName="password"
      [class.is-invalid]="isValidField('password')"
    >
    <div class="invalid-feedback" *ngIf="registerForm.controls['password'].hasError('required')">
      Please enter a password
    </div>
    <div class="invalid-feedback" *ngIf="registerForm.controls['password'].hasError('minlength')">
      Password must be at least 4 characters long
    </div>
    <div class="invalid-feedback" *ngIf="registerForm.controls['password'].hasError('maxlength')">
      Password must be at most 8 characters
    </div>
  </div>

  <div class="mb-3">
    <input type="password"
      class="form-control"
      placeholder="Confirm Password"
      formControlName="confirmPassword"
      [class.is-invalid]="isValidField('confirmPassword')"
    >
    <div class="invalid-feedback" *ngIf="registerForm.controls['confirmPassword'].hasError('required')">
      This field is required
    </div>
    <div class="invalid-feedback" *ngIf="registerForm.controls['confirmPassword'].hasError('notMatching')">
      Passwords are not the same!
    </div>
  </div> -->

  <div class="text-center">
    <button class="btn btn-success me-2" type="submit"> Register </button>
    <button class="btn btn-default me-2" type="button" (click)="cancel()"> Cancel </button>
  </div>

</form>

<!-- <div class="row">
  @if (registerForm.invalid) {
    <div class="row" *ngIf="isValidField('username')">
      <span class="form-text text-danger" > Invalid username </span>
    </div>

    <div class="row" *ngIf="isValidField('password')">
      <span class="form-text text-danger" > Invalid password </span>
    </div>

    <div class="row" *ngIf="isValidField('confirmPassword')">
      <span class="form-text text-danger" > Passwords are not the same! </span>
    </div>

  }
</div> -->

<p>{{registerForm.value | json}}</p>
<p>{{registerForm.status | json}}</p>
